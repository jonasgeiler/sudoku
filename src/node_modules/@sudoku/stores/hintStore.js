import { writable } from 'svelte/store';

class HintStore {
    constructor() {
        // 初始化一个可写的 Svelte store，用于存储提示列表
        this.hints = writable([]);
    }

    // 订阅 store 的方法，用于在组件中获取提示数据
    subscribe(run, invalidate) {
        return this.hints.subscribe(run, invalidate);
    }

    // 添加一个提示到提示列表中
    add(pos, [value]) {
        this.hints.update(current => [...current, { x: pos.x, y: pos.y, value:[value] }]);
    }

    // 将一个列表直接设置为 hints
    hint_array_set(list) {
        if (list instanceof Array) {
            this.hints.set(list);
        }
    }

    // 根据索引移除指定的提示
    remove(index) {
        this.hints.update(current => current.filter((_, i) => i !== index));
    }

    // 清空所有提示
    clear() {
        this.hints.set([]);
    }
}

// 导出 HintStore 实例
export const hintStore = new HintStore();

